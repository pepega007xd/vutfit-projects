#!/bin/bash

#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
###										    ###
###	IF YOU ARE READING THIS, I STRONGLY ENCOURAGE YOU TO JUST STOP		    ###
###	AND TRY TO WORK ON PROGRAM-4 WITHOUT INSPECTING THIS SCRIPT    		    ###
###										    ###
###			WHY?							    ###
###										    ###
###	BECAUSE THIS SCRIPT GIVES YOU INFORMATION "WHAT IS THE CULPRIT",	    ###
###	HENCE REMOVING THE CHALLENGE OF FIGURING IT OUT YOUSELF.		    ###
###										    ###
###	IN ANY WAY, TO SCORE POINTS FOR THIS PART OF ASSIGNMENT, YOU WILL	    ###
###	ANYWAY NEED TO SHOW THE CULPRIT WITH TANGIBLE DATA, PRETTY MUCH THE SAME    ###
###	AS YOU WOULD USE WITHOUT KNOWING THE CULPRIT IN ADVANCE.		    ###
###										    ###
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################
#######################################################################################

sudo lsmod | grep -w pr4-kmod

GREP_RET=$?

if [ $GREP_RET -ne 0 ]; then
	sudo insmod /etc/secret_files/pr4-kmod.ko 2> /dev/null	
	if [ $? -ne 0 ]; then
		echo "Something went wrong, please contact vbendel@redhat.com"
		echo ""
		echo "In case you tried to run this program on another machine than the study VM, you are missing some files."
		echo "Please reach out to vbendel@redhat.com"
	fi
fi

